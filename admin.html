<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Админ панель</title>
</head>

<body>

<h2>Редактор слов</h2>

Русское слово:<br>
<input id="ru"><br>

Английское слово:<br>
<input id="en"><br><br>

<button onclick="addPair()">Добавить</button>

<hr>

<h3>Список слов</h3>
<div id="list"></div>

<script>

const SETTINGS_BIN = "698f3a3043b1c97be97c510c";
const API_KEY = "$2a$10$sw1K/RXpKK2k3L5l6.wDLuJWKESzfg51etzmCpCb/Q6sEKy0Oudwi";

let pairs = [];

// загрузка слов
async function loadPairs() {

    let res = await fetch(`https://api.jsonbin.io/v3/b/${SETTINGS_BIN}/latest`, {
        headers: { "X-Master-Key": API_KEY }
    });

    let data = await res.json();

    pairs = data.record.pairs || [];

    showPairs();
}

function showPairs() {

    let html = "";

    pairs.forEach(p => {
        html += `<p>${p.ru} → ${p.en}</p>`;
    });

    document.getElementById("list").innerHTML = html;
}

async function addPair() {

    let ru = document.getElementById("ru").value;
    let en = document.getElementById("en").value;

    pairs.push({ ru, en });

    await fetch(`https://api.jsonbin.io/v3/b/${SETTINGS_BIN}`, {
        method: "PUT",
        headers: {
            "Content-Type": "application/json",
            "X-Master-Key": API_KEY
        },
        body: JSON.stringify({ pairs })
    });

    loadPairs();
}

loadPairs();

</script>

</body>
</html>
