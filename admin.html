<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Панель администратора</title>
</head>

<body>

<h1>Результаты учеников</h1>

<button onclick="loadResults()">Обновить результаты</button>

<div id="results"></div>

<script>

const BIN_RESULTS = "698f3a5c43b1c97be97c5186";
const API_KEY = "$2a$10$sw1K/RXpKK2k3L5l6.wDLuJWKESzfg51etzmCpCb/Q6sEKy0Oudwi";

async function loadResults() {

    let res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_RESULTS}/latest`, {
        headers: { "X-Master-Key": API_KEY }
    });

    let data = await res.json();

    let results = data.record.results || [];

    let html = "";

    results.reverse().forEach(r => {

        html += `
            <div style="border:1px solid gray; margin:10px; padding:10px;">
                <h3>${r.name}</h3>
                <p><b>Результат:</b> ${r.correct} / ${r.total}</p>
                <p><b>Дата:</b> ${r.date}</p>
                
                <details>
                    <summary>Показать ответы</summary>
                    <ul>
                        ${r.answers.map(a => `<li>${a}</li>`).join("")}
                    </ul>
                </details>
            </div>
        `;
    });

    document.getElementById("results").innerHTML = html;
}

loadResults();

</script>

</body>
</html>
