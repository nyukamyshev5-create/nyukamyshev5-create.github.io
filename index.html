<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Тест</title>

<script src="config.js"></script>

<style>
body{
    font-family: Arial;
    background: linear-gradient(90deg,#4facfe,#43e97b);
    margin:0;
}

#login, #test{
    background:white;
    width:400px;
    margin:100px auto;
    padding:20px;
    border-radius:10px;
    text-align:center;
}

button{
    padding:10px 20px;
    font-size:16px;
}

#question{
    font-size:22px;
    margin:20px;
}

input{
    padding:10px;
    font-size:16px;
    width:80%;
}
</style>
</head>
<body>

<div id="login">
<h2>Введите имя</h2>
<input id="name">
<br><br>
<button onclick="start()">Начать</button>
<div id="error" style="color:red"></div>
</div>

<div id="test" style="display:none">
<div id="question"></div>
<input id="answer">
<br><br>
<button onclick="check()">Ответить</button>
<div id="result"></div>
</div>

<script>

let words = []
let current = null

async function loadData(){

const url =
`https://api.github.com/repos/${CONFIG.owner}/${CONFIG.repo}/contents/${CONFIG.file}?ref=${CONFIG.branch}`

const res = await fetch(url,{
headers:{
Authorization:`Bearer ${CONFIG.token}`
}
})

const json = await res.json()

const content = JSON.parse(atob(json.content))

return content
}

async function start(){

const name = document.getElementById("name").value.trim()

if(!name)return

const data = await loadData()

if(!data.students[name]){
document.getElementById("error").innerText="Ученик не найден"
return
}

words = data.students[name]

document.getElementById("login").style.display="none"
document.getElementById("test").style.display="block"

next()
}

function next(){

current = words[Math.floor(Math.random()*words.length)]

document.getElementById("question").innerText=current.en

document.getElementById("answer").value=""
document.getElementById("result").innerText=""
}

function check(){

const answer =
document.getElementById("answer").value.trim().toLowerCase()

if(answer==current.ru.toLowerCase()){

document.getElementById("result").innerHTML="✅ Правильно"
}
else{

document.getElementById("result").innerHTML=
"❌ Правильно: "+current.ru
}

setTimeout(next,1000)

}

</script>

</body>
</html>
