html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Dictation</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            text-align: center;
            margin: 0 0 20px 0;
            font-size: 28px;
        }
        h2, h3, h4 {
            color: #444;
            margin: 10px 0;
        }
        button {
            background: #4a6ee0;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 5px 0;
            width: 100%;
            transition: all 0.3s;
        }
        button:hover {
            background: #3a5ec0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        button.secondary {
            background: #ff9800;
        }
        button.secondary:hover {
            background: #e68900;
        }
        input {
            padding: 12px;
            width: 100%;
            margin: 8px 0;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }
        input:focus {
            border-color: #4a6ee0;
            outline: none;
        }
        .hidden {
            display: none;
        }
        .section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        .word {
            font-size: 48px;
            text-align: center;
            margin: 20px 0;
            color: #4a6ee0;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .timer {
            font-size: 42px;
            text-align: center;
            margin: 15px 0;
            color: #f44336;
            font-weight: bold;
        }
        .feedback {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            margin: 15px 0;
            padding: 15px;
            border-radius: 8px;
        }
        .correct-feedback {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        .incorrect-feedback {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        .result-item {
            padding: 12px;
            margin: 8px 0;
            border-radius: 8px;
            font-size: 15px;
        }
        .correct {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }
        .incorrect {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        .result-word {
            font-weight: bold;
            font-size: 16px;
        }
        .result-detail {
            margin-top: 5px;
            padding-left: 10px;
            font-size: 14px;
        }
        .message {
            text-align: center;
            font-weight: bold;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success {
            background: #d4edda;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
        }
        .stats {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }
        .stats p {
            margin: 5px 0;
            font-size: 18px;
        }
        .admin-box {
            background: #fff3e0;
            padding: 20px;
            border-radius: 8px;
        }
        .mode-btn {
            background: #6c757d;
            margin-bottom: 20px;
        }
        .mode-btn:hover {
            background: #5a6268;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìù English Dictation</h1>
        
        <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ -->
        <button id="toggleMode" class="mode-btn">üîß –†–µ–∂–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</button>
        
        <!-- ========== –†–ï–ñ–ò–ú –£–ß–ï–ù–ò–ö–ê ========== -->
        <div id="studentMode">
            <div class="section">
                <h3>üë®‚Äçüéì –í—Ö–æ–¥ –≤ –¥–∏–∫—Ç–∞–Ω—Ç</h3>
                <input type="text" id="studentName" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
                <button id="startDictation">–ù–∞—á–∞—Ç—å –¥–∏–∫—Ç–∞–Ω—Ç</button>
            </div>
            
            <div id="dictationScreen" class="hidden">
                <div class="word" id="currentWord">–¥–æ–º</div>
                <div class="timer" id="timer">20</div>
                <input type="text" id="studentAnswer" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ —Å–ª–æ–≤–æ" autocomplete="off">
                <button id="submitAnswer">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
                <div id="answerFeedback" class="feedback"></div>
            </div>
            
            <div id="resultsScreen" class="hidden">
                <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∫—Ç–∞–Ω—Ç–∞</h3>
                <div class="stats" id="stats"></div>
                <div id="detailedResults"></div>
                <button id="newDictation" class="secondary">–ù–æ–≤—ã–π –¥–∏–∫—Ç–∞–Ω—Ç</button>
            </div>
        </div>
        
        <!-- ========== –†–ï–ñ–ò–ú –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê ========== -->
        <div id="adminMode" class="hidden">
            <div class="section admin-box">
                <h3>üîê –í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                <input type="password" id="adminPass" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                <button id="adminLogin">–í–æ–π—Ç–∏</button>
            </div>
            
            <div id="adminPanel" class="hidden">
                <div class="section">
                    <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∏–∫—Ç–∞–Ω—Ç–∞</h3>
                    
                    <label>üìó –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å–ª–æ–≤–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                    <input type="text" id="engWords" value="house, cup, table, cat, dog, book, car, phone">
                    
                    <label>üìï –†—É—Å—Å–∫–∏–µ —Å–ª–æ–≤–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                    <input type="text" id="rusWords" value="–¥–æ–º, —á–∞—à–∫–∞, —Å—Ç–æ–ª, –∫–æ—Ç, —Å–æ–±–∞–∫–∞, –∫–Ω–∏–≥–∞, –º–∞—à–∏–Ω–∞, —Ç–µ–ª–µ—Ñ–æ–Ω">
                    
                    <label>‚è±Ô∏è –í—Ä–µ–º—è –Ω–∞ —Å–ª–æ–≤–æ (—Å–µ–∫—É–Ω–¥):</label>
                    <input type="number" id="dictationTime" value="20" min="5" max="60">
                    
                    <button id="saveSettings">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    <div id="saveStatus" class="message"></div>
                </div>
                
                <div class="section">
                    <h3>üìã –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—á–µ–Ω–∏–∫–æ–≤</h3>
                    <div id="allStudentsResults"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        let englishWords = [];
        let russianWords = [];
        let timeLimit = 20;
        let currentWordIndex = 0;
        let studentAnswers = [];
        let currentStudent = '';
        let timerInterval = null;
        
        // –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
        const ADMIN_PASSWORD = "tutorAI";
        
        // ========== –ó–ê–ì–†–£–ó–ö–ê –ù–ê–°–¢–†–û–ï–ö ==========
        function loadSettings() {
            console.log('–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫...');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑ localStorage
            let savedEng = localStorage.getItem('englishWords');
            let savedRus = localStorage.getItem('russianWords');
            let savedTime = localStorage.getItem('timeLimit');
            
            if (savedEng) {
                englishWords = JSON.parse(savedEng);
            } else {
                englishWords = ["house", "cup", "table", "cat", "dog", "book", "car", "phone"];
                localStorage.setItem('englishWords', JSON.stringify(englishWords));
            }
            
            if (savedRus) {
                russianWords = JSON.parse(savedRus);
            } else {
                russianWords = ["–¥–æ–º", "—á–∞—à–∫–∞", "—Å—Ç–æ–ª", "–∫–æ—Ç", "—Å–æ–±–∞–∫–∞", "–∫–Ω–∏–≥–∞", "–º–∞—à–∏–Ω–∞", "—Ç–µ–ª–µ—Ñ–æ–Ω"];
                localStorage.setItem('russianWords', JSON.stringify(russianWords));
            }
            
            if (savedTime) {
                timeLimit = parseInt(savedTime);
            } else {
                timeLimit = 20;
                localStorage.setItem('timeLimit', timeLimit);
            }
            
            console.log('–ó–∞–≥—Ä—É–∂–µ–Ω–æ:', englishWords.length, '—Å–ª–æ–≤');
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        loadSettings();
        
        // ========== –≠–õ–ï–ú–ï–ù–¢–´ ==========
        const toggleMode = document.getElementById('toggleMode');
        const studentMode = document.getElementById('studentMode');
        const adminMode = document.getElementById('adminMode');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã —É—á–µ–Ω–∏–∫–∞
        const studentNameInput = document.getElementById('studentName');
        const startDictationBtn = document.getElementById('startDictation');
        const dictationScreen = document.getElementById('dictationScreen');
        const currentWord = document.getElementById('currentWord');
        const timer = document.getElementById('timer');
        const studentAnswer = document.getElementById('studentAnswer');
        const submitAnswer = document.getElementById('submitAnswer');
        const answerFeedback = document.getElementById('answerFeedback');
        const resultsScreen = document.getElementById('resultsScreen');
        const stats = document.getElementById('stats');
        const detailedResults = document.getElementById('detailedResults');
        const newDictationBtn = document.getElementById('newDictation');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –∞–¥–º–∏–Ω–∞
        const adminPass = document.getElementById('adminPass');
        const adminLogin = document.getElementById('adminLogin');
        const adminPanel = document.getElementById('adminPanel');
        const engWordsInput = document.getElementById('engWords');
        const rusWordsInput = document.getElementById('rusWords');
        const dictationTime = document.getElementById('dictationTime');
        const saveSettings = document.getElementById('saveSettings');
        const saveStatus = document.getElementById('saveStatus');
        const allStudentsResults = document.getElementById('allStudentsResults');
        
        // ========== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –†–ï–ñ–ò–ú–û–í ==========
        toggleMode.addEventListener('click', function() {
            if (studentMode.classList.contains('hidden')) {
                // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ —É—á–µ–Ω–∏–∫–∞
                studentMode.classList.remove('hidden');
                adminMode.classList.add('hidden');
                toggleMode.textContent = 'üîß –†–µ–∂–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞';
            } else {
                // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –Ω–∞ –∞–¥–º–∏–Ω–∞
                studentMode.classList.add('hidden');
                adminMode.classList.remove('hidden');
                toggleMode.textContent = 'üë®‚Äçüéì –†–µ–∂–∏–º —É—á–µ–Ω–∏–∫–∞';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                engWordsInput.value = englishWords.join(', ');
                rusWordsInput.value = russianWords.join(', ');
                dictationTime.value = timeLimit;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                displayAllResults();
            }
        });
        
        // ========== –í–•–û–î –í –ê–î–ú–ò–ù–ö–£ ==========
        adminLogin.addEventListener('click', function() {
            if (adminPass.value === ADMIN_PASSWORD) {
                adminPanel.classList.remove('hidden');
                adminPass.disabled = true;
                adminLogin.disabled = true;
            } else {
                alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
            }
        });
        
        // ========== –°–û–•–†–ê–ù–ï–ù–ò–ï –ù–ê–°–¢–†–û–ï–ö ==========
        saveSettings.addEventListener('click', function() {
            let engText = engWordsInput.value.trim();
            let rusText = rusWordsInput.value.trim();
            let newTime = parseInt(dictationTime.value);
            
            if (!engText || !rusText) {
                saveStatus.textContent = '‚ùå –í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–∞!';
                saveStatus.className = 'message error';
                return;
            }
            
            let newEng = engText.split(',').map(w => w.trim()).filter(w => w);
            let newRus = rusText.split(',').map(w => w.trim()).filter(w => w);
            
            if (newEng.length !== newRus.length) {
                saveStatus.textContent = '‚ùå –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å!';
                saveStatus.className = 'message error';
                return;
            }
            
            if (newEng.length === 0) {
                saveStatus.textContent = '‚ùå –î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Å–ª–æ–≤–æ!';
                saveStatus.className = 'message error';
                return;
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º
            englishWords = newEng;
            russianWords = newRus;
            timeLimit = newTime;
            
            localStorage.setItem('englishWords', JSON.stringify(englishWords));
            localStorage.setItem('russianWords', JSON.stringify(russianWords));
            localStorage.setItem('timeLimit', timeLimit);
            
            saveStatus.textContent = '‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!';
            saveStatus.className = 'message success';
            
            setTimeout(() => {
                saveStatus.textContent = '';
            }, 2000);
        });
        
        // ========== –ù–ê–ß–ê–õ–û –î–ò–ö–¢–ê–ù–¢–ê ==========
        startDictationBtn.addEventListener('click', function() {
            currentStudent = studentNameInput.value.trim();
            
            if (!currentStudent) {
                alert('‚ùå –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è!');
                return;
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–≤–µ–∂–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            loadSettings();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–ª–æ–≤
            if (englishWords.length === 0 || russianWords.length === 0) {
                alert('‚ùå –î–∏–∫—Ç–∞–Ω—Ç –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—é.');
                return;
            }
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º
            currentWordIndex = 0;
            studentAnswers = [];
            
            // –ü—Ä—è—á–µ–º –≤—Ö–æ–¥, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∫—Ç–∞–Ω—Ç
            document.querySelector('#studentMode .section').classList.add('hidden');
            dictationScreen.classList.remove('hidden');
            
            // –ù–∞—á–∏–Ω–∞–µ–º
            showWord();
        });
        
        function showWord() {
            if (currentWordIndex >= russianWords.length) {
                finishDictation();
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–æ–≤–æ
            currentWord.textContent = russianWords[currentWordIndex];
            studentAnswer.value = '';
            answerFeedback.textContent = '';
            answerFeedback.className = 'feedback';
            studentAnswer.focus();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
            let timeLeft = timeLimit;
            timer.textContent = timeLeft;
            
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                timer.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitAnswer.click();
                }
            }, 1000);
        }
        
        function checkAnswer() {
            let answer = studentAnswer.value.trim().toLowerCase();
            let correctWord = englishWords[currentWordIndex];
            let isCorrect = answer === correctWord.toLowerCase();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
            studentAnswers.push({
                russianWord: russianWords[currentWordIndex],
                correctEnglish: correctWord,
                studentAnswer: answer || '(–ø—É—Å—Ç–æ)',
                isCorrect: isCorrect,
                timestamp: new Date().toLocaleTimeString()
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–∏–¥–±–µ–∫
            if (isCorrect) {
                answerFeedback.textContent = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü!';
                answerFeedback.className = 'feedback correct-feedback';
            } else {
                answerFeedback.textContent = `‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctWord}`;
                answerFeedback.className = 'feedback incorrect-feedback';
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É
            currentWordIndex++;
            
            setTimeout(() => {
                clearInterval(timerInterval);
                showWord();
            }, 1500);
        }
        
        submitAnswer.addEventListener('click', function() {
            clearInterval(timerInterval);
            checkAnswer();
        });
        
        studentAnswer.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                clearInterval(timerInterval);
                checkAnswer();
            }
        });
        
        function finishDictation() {
            clearInterval(timerInterval);
            
            dictationScreen.classList.add('hidden');
            resultsScreen.classList.remove('hidden');
            
            // –°—á–∏—Ç–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            let correctCount = studentAnswers.filter(a => a.isCorrect).length;
            let totalCount = studentAnswers.length;
            let percentage = Math.round((correctCount / totalCount) * 100);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            stats.innerHTML = `
                <h4>${currentStudent}</h4>
                <p>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correctCount}</p>
                <p>‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: ${totalCount - correctCount}</p>
                <p>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç: ${correctCount}/${totalCount} (${percentage}%)</p>
            `;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            let resultsHtml = '<h4>–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤:</h4>';
            
            studentAnswers.forEach((a, index) => {
                resultsHtml += `
                    <div class="result-item ${a.isCorrect ? 'correct' : 'incorrect'}">
                        <div class="result-word">${index + 1}. ${a.russianWord}</div>
                        <div class="result-detail">
                            <div>üìù –í–∞—à –æ—Ç–≤–µ—Ç: <b>${a.studentAnswer}</b></div>
                            <div>‚úì –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <b>${a.correctEnglish}</b></div>
                            <div>${a.isCorrect ? '‚úÖ –í–µ—Ä–Ω–æ' : '‚ùå –û—à–∏–±–∫–∞'}</div>
                        </div>
                    </div>
                `;
            });
            
            detailedResults.innerHTML = resultsHtml;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            saveStudentResults(correctCount, totalCount, percentage);
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ email
            sendResultsToEmail(correctCount, totalCount, percentage);
        }
        
        function saveStudentResults(correct, total, percent) {
            let allResults = JSON.parse(localStorage.getItem('allDictationResults') || '[]');
            
            allResults.push({
                studentName: currentStudent,
                date: new Date().toLocaleString(),
                correctCount: correct,
                totalCount: total,
                percentage: percent,
                details: studentAnswers
            });
            
            localStorage.setItem('allDictationResults', JSON.stringify(allResults));
        }
        
        function sendResultsToEmail(correct, total, percent) {
            let emailMessage = `–£—á–µ–Ω–∏–∫: ${currentStudent}\n`;
            emailMessage += `–î–∞—Ç–∞: ${new Date().toLocaleString()}\n`;
            emailMessage += `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${correct}/${total} (${percent}%)\n\n`;
            emailMessage += `–î–ï–¢–ê–õ–¨–ù–´–ô –†–ê–ó–ë–û–†:\n`;
            emailMessage += `==================\n\n`;
            
            studentAnswers.forEach((a, index) => {
                emailMessage += `${index + 1}. ${a.russianWord}\n`;
                emailMessage += `   –û—Ç–≤–µ—Ç —É—á–µ–Ω–∏–∫–∞: ${a.studentAnswer}\n`;
                emailMessage += `   –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${a.correctEnglish}\n`;
                emailMessage += `   –†–µ–∑—É–ª—å—Ç–∞—Ç: ${a.isCorrect ? '‚úÖ' : '‚ùå'}\n\n`;
            });
            
            fetch('https://formsubmit.co/ajax/nyukamyshev@mail.ru', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    name: currentStudent,
                    message: emailMessage,
                    _subject: `üìù –î–∏–∫—Ç–∞–Ω—Ç: ${currentStudent} - ${correct}/${total}`,
                    _template: 'table'
                })
            })
            .then(() => console.log('Email –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω'))
            .catch(() => console.log('Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω'));
        }
        
        newDictationBtn.addEventListener('click', function() {
            resultsScreen.classList.add('hidden');
            document.querySelector('#studentMode .section').classList.remove('hidden');
            studentNameInput.value = '';
        });
        
        function displayAllResults() {
            let allResults = JSON.parse(localStorage.getItem('allDictationResults') || '[]');
            
            if (allResults.length === 0) {
                allStudentsResults.innerHTML = '<p>üì≠ –ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</p>';
                return;
            }
            
            let html = '';
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º
            allResults.reverse().forEach((result, index) => {
                html += `
                    <div style="background: white; border-radius: 8px; padding: 15px; margin-bottom: 15px; border: 1px solid #dee2e6;">
                        <h4 style="margin: 0 0 10px 0; color: #4a6ee0;">${result.studentName}</h4>
                        <p style="margin: 5px 0; color: #666;">üìÖ ${result.date}</p>
                        <p style="margin: 5px 0; font-size: 18px;">
                            <span style="color: #28a745;">‚úÖ ${result.correctCount}</span> 
                            <span style="color: #dc3545;">‚ùå ${result.totalCount - result.correctCount}</span>
                            <span style="color: #4a6ee0;">üìä ${result.percentage}%</span>
                        </p>
                        
                        <details style="margin-top: 10px;">
                            <summary style="color: #4a6ee0; cursor: pointer; font-weight: bold;">–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏</summary>
                            <div style="margin-top: 10px;">
                `;
                
                result.details.forEach((d, i) => {
                    html += `
                        <div style="background: ${d.isCorrect ? '#d4edda' : '#f8d7da'}; padding: 10px; margin: 5px 0; border-radius: 5px;">
                            <b>${i+1}. ${d.russianWord}</b><br>
                            <span style="color: #666;">–û—Ç–≤–µ—Ç: ${d.studentAnswer}</span><br>
                            <span>–ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${d.correctEnglish}</span><br>
                            <span>${d.isCorrect ? '‚úÖ' : '‚ùå'}</span>
                        </div>
                    `;
                });
                
                html += `
                            </div>
                        </details>
                    </div>
                `;
            });
            
            allStudentsResults.innerHTML = html;
        }
    </script>
</body>
</html>