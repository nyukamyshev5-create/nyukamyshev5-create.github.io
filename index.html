html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>English Dictation</title>
    <style>
        body {
            font-family: Arial;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f0f0f0;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 10px gray;
        }
        button {
            background: blue;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        input {
            padding: 10px;
            width: 100%;
            margin: 10px 0;
        }
        .hidden {
            display: none;
        }
        .admin-box {
            background: #e6f3ff;
            padding: 20px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>English Dictation</h1>
        
        <button id="adminBtn">Switch to Admin Mode</button>
        
        <!-- Student Section -->
        <div id="student">
            <input type="text" id="studentName" placeholder="Your name">
            <button onclick="startDictation()">Start Dictation</button>
        </div>
        
        <!-- Admin Section -->
        <div id="admin" class="hidden">
            <div class="admin-box">
                <h3>Admin</h3>
                <input type="password" id="password" placeholder="Password">
                <button onclick="checkPassword()">Login</button>
                
                <div id="adminPanel" class="hidden">
                    <input type="text" id="engWords" placeholder="English words (comma)">
                    <input type="text" id="rusWords" placeholder="Russian words (comma)">
                    <input type="number" id="timer" value="20">
                    <button onclick="saveSettings()">SAVE SETTINGS</button>
                    <p id="message"></p>
                </div>
            </div>
        </div>
        
        <!-- Dictation -->
        <div id="dictation" class="hidden">
            <h2 id="word"></h2>
            <h3 id="timerDisplay">20</h3>
            <input type="text" id="answer" placeholder="Type English word">
            <button onclick="checkAnswer()">Next</button>
            <p id="fb"></p>
        </div>
        
        <!-- Results -->
        <div id="results" class="hidden">
            <h3>Results</h3>
            <div id="resultList"></div>
            <button onclick="location.reload()">Again</button>
        </div>
    </div>

    <script>
        let eng = ["house", "cup", "table"];
        let rus = ["дом", "чашка", "стол"];
        let time = 20;
        let current = 0;
        let answers = [];
        let student = '';
        let timerInterval;

        // Загружаем сохраненные настройки
        function loadAllSettings() {
            let savedEng = localStorage.getItem('eng');
            let savedRus = localStorage.getItem('rus');
            let savedTime = localStorage.getItem('time');
            
            if (savedEng) {
                eng = JSON.parse(savedEng);
            }
            if (savedRus) {
                rus = JSON.parse(savedRus);
            }
            if (savedTime) {
                time = parseInt(savedTime);
            }
        }
        
        // Вызываем загрузку
        loadAllSettings();

        function startDictation() {
            student = document.getElementById('studentName').value;
            if (!student) {
                alert('Enter name');
                return;
            }
            document.getElementById('student').classList.add('hidden');
            document.getElementById('dictation').classList.remove('hidden');
            showWord();
        }

        function showWord() {
            if (current >= rus.length) {
                finish();
                return;
            }
            document.getElementById('word').innerText = rus[current];
            document.getElementById('answer').value = '';
            document.getElementById('fb').innerText = '';
            let t = time;
            document.getElementById('timerDisplay').innerText = t;
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                t--;
                document.getElementById('timerDisplay').innerText = t;
                if (t <= 0) {
                    clearInterval(timerInterval);
                    checkAnswer();
                }
            }, 1000);
        }

        function checkAnswer() {
            let ans = document.getElementById('answer').value.trim().toLowerCase();
            let correct = eng[current].toLowerCase();
            let isCorrect = ans === correct;
            
            answers.push({
                word: rus[current],
                correct: eng[current],
                answer: ans,
                ok: isCorrect
            });
            
            if (isCorrect) {
                document.getElementById('fb').innerText = '✅ Correct!';
            } else {
                document.getElementById('fb').innerText = '❌ Wrong! Correct: ' + eng[current];
            }
            
            current++;
            setTimeout(showWord, 1500);
        }

        function finish() {
            clearInterval(timerInterval);
            document.getElementById('dictation').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            
            let correctCount = answers.filter(a => a.ok).length;
            let html = '';
            answers.forEach(a => {
                html += `<p style="color: ${a.ok ? 'green' : 'red'}">
                    ${a.word} → your answer: ${a.answer} (${a.ok ? '✓' : '✗'})
                </p>`;
            });
            document.getElementById('resultList').innerHTML = html;
            
            // Сохраняем локально
            let results = JSON.parse(localStorage.getItem('results') || '[]');
            results.push({
                name: student,
                date: new Date().toLocaleString(),
                score: correctCount + '/' + answers.length
            });
            localStorage.setItem('results', JSON.stringify(results));
            
            // Отправляем на email
            sendResultsToEmail(correctCount, answers.length);
        }

        function sendResultsToEmail(correct, total) {
            let message = `Student: ${student}\n`;
            message += `Date: ${new Date().toLocaleString()}\n`;
            message += `Score: ${correct}/${total}\n\n`;
            message += `Details:\n`;
            
            answers.forEach(a => {
                message += `${a.word} → your answer: ${a.answer} (correct: ${a.correct}) - ${a.ok ? '✓' : '✗'}\n`;
            });
            
            fetch('https://formsubmit.co/ajax/nyukamyshev@mail.ru', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify({
                    name: student,
                    message: message,
                    _subject: `Dictation Results: ${student}`,
                    _template: 'table'
                })
            })
            .then(response => response.json())
            .then(data => {
                console.log('Email sent!');
                alert('Results sent to teacher!');
            })
            .catch(error => {
                console.log('Email error:', error);
            });
        }

        // Admin functions
        document.getElementById('adminBtn').onclick = () => {
            document.getElementById('student').classList.add('hidden');
            document.getElementById('admin').classList.remove('hidden');
            // Показываем текущие настройки
            document.getElementById('engWords').value = eng.join(', ');
            document.getElementById('rusWords').value = rus.join(', ');
            document.getElementById('timer').value = time;
        };

        function checkPassword() {
            if (document.getElementById('password').value === 'tutorAI') {
                document.getElementById('adminPanel').classList.remove('hidden');
            } else {
                alert('Wrong password');
            }
        }

        function saveSettings() {
            let engText = document.getElementById('engWords').value;
            let rusText = document.getElementById('rusWords').value;
            let newTime = parseInt(document.getElementById('timer').value);
            
            if (engText && rusText) {
                eng = engText.split(',').map(w => w.trim());
                rus = rusText.split(',').map(w => w.trim());
                time = newTime;
                
                localStorage.setItem('eng', JSON.stringify(eng));
                localStorage.setItem('rus', JSON.stringify(rus));
                localStorage.setItem('time', time);
                
                document.getElementById('message').innerText = '✅ Settings saved! Students will see new words.';
                document.getElementById('message').style.color = 'green';
            }
        }
    </script>
</body>
</html>