<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Диктанты</title>

<meta name="autocomplete" content="off">
<meta name="autofill" content="off">

<style>
body{
    font-family: Arial;
    background: linear-gradient(90deg,#4e73df,#1cc88a);
    margin:0;
}

.container{
    background:white;
    width:700px;
    margin:40px auto;
    padding:30px;
    border-radius:10px;
}

button{
    padding:10px 20px;
    margin:5px;
    border:none;
    border-radius:6px;
    background:#4e73df;
    color:white;
    cursor:pointer;
}

button:hover{
    background:#2e59d9;
}

input{
    padding:5px;
    margin:5px;
}

.hidden{
    display:none;
}

.result{
    margin-top:20px;
    padding:10px;
    background:#f8f9fc;
}
</style>
</head>
<body>

<div class="container">

<h2>Выберите ученика</h2>

<div id="students"></div>

<hr>

<div id="testArea" class="hidden">

<h3 id="studentName"></h3>

<div id="words"></div>

<button onclick="submitTest()">Отправить</button>

<button onclick="restart()">Начать новую попытку</button>

<div id="result"></div>

</div>

</div>

<script>

//////////////////////////////////////////////////
// СЛОВА УЧЕНИКОВ (ХРАНЯТСЯ НАВСЕГДА)
//////////////////////////////////////////////////

const students = {

"Полина":[
["исследование","research"],
["карьера","career"],
["гид","guide"],
["развитие","development"]
],

"Ирина":[
["пухлый, полненький","chubby"],
["болтун, болтушка","chatterbox"],
["злодей, негодяй","villain"],
["огромный, массивный","huge"]
],

"Кира":[
["дом","house"],
["работа","work"],
["исследование","research"]
],

"Алексей":[
["быстрый","fast"],
["медленный","slow"]
],

"Григорий":[
["умный","smart"],
["глупый","stupid"]
],

"Роман":[
["сильный","strong"],
["слабый","weak"]
],

"Владимир":[
["большой","big"],
["маленький","small"]
],

"Дарья":[
["красивый","beautiful"],
["уродливый","ugly"]
],

"Ксения":[
["новый","new"],
["старый","old"]
],

"Виктория":[
["запрет","ban"],
["юмор","humor"],
["следствие","consequence"]
]

};

//////////////////////////////////////////////////
// защита от автозаполнения
//////////////////////////////////////////////////

document.addEventListener("input", e=>{
e.target.setAttribute("autocomplete","off");
e.target.setAttribute("readonly",true);
setTimeout(()=>e.target.removeAttribute("readonly"),50);
});

//////////////////////////////////////////////////
// защита от вставки
//////////////////////////////////////////////////

document.addEventListener("paste", e=>{
e.preventDefault();
alert("Вставка запрещена");
});

//////////////////////////////////////////////////
// защита от копирования
//////////////////////////////////////////////////

document.addEventListener("copy", e=>{
e.preventDefault();
});

document.addEventListener("contextmenu", e=>{
e.preventDefault();
});

//////////////////////////////////////////////////
// создание кнопок учеников
//////////////////////////////////////////////////

const studentsDiv=document.getElementById("students");

Object.keys(students).forEach(name=>{

const btn=document.createElement("button");

btn.innerText=name;

btn.onclick=()=>startTest(name);

studentsDiv.appendChild(btn);

});

//////////////////////////////////////////////////
// запуск теста
//////////////////////////////////////////////////

let currentStudent="";
let inputs=[];

function startTest(name){

currentStudent=name;

document.getElementById("studentName").innerText="Ученик: "+name;

const wordsDiv=document.getElementById("words");

wordsDiv.innerHTML="";

inputs=[];

students[name].forEach((word,index)=>{

const div=document.createElement("div");

div.innerHTML=word[0]+" <input type='text' autocomplete='off'>";

wordsDiv.appendChild(div);

inputs.push(div.querySelector("input"));

});

document.getElementById("testArea").classList.remove("hidden");

document.getElementById("result").innerHTML="";

}

//////////////////////////////////////////////////
// проверка
//////////////////////////////////////////////////

function normalize(text){

return text
.toLowerCase()
.replace(/[^a-z\s]/g,"")
.trim();

}

function submitTest(){

let correct=0;

let total=students[currentStudent].length;

let details="";

students[currentStudent].forEach((word,index)=>{

const answer=normalize(inputs[index].value);

const correctAnswer=normalize(word[1]);

if(answer===correctAnswer){

correct++;

details+="✅ "+word[0]+"<br>";

}else{

details+="❌ "+word[0]+" → "+word[1]+"<br>";

}

});

let percent=Math.round(correct/total*100);

document.getElementById("result").innerHTML=
"<div class='result'>"+
"Процент: "+percent+"%<br><br>"+
details+
"</div>";

}

//////////////////////////////////////////////////
// новая попытка
//////////////////////////////////////////////////

function restart(){

inputs.forEach(input=>input.value="");

document.getElementById("result").innerHTML="";

}

</script>

</body>
</html>
