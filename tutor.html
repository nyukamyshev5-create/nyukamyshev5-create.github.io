<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Тест</title>

<style>

body{
font-family:Arial;
background:#f0f0f0;
padding:20px;
}

input{
display:block;
margin:10px;
padding:5px;
}

button{
padding:10px;
margin:10px;
}

</style>

</head>

<body>

<h2 id="name"></h2>

<div id="test"></div>

<button onclick="finish()">Завершить</button>

<button onclick="retry()">Начать новую попытку</button>

<div id="result"></div>

<script>

document.addEventListener("copy",e=>e.preventDefault())
document.addEventListener("paste",e=>e.preventDefault())

const params=new URLSearchParams(location.search)
const student=params.get("student")

document.getElementById("name").innerText=student

let words=[]
let answers=[]

fetch("data.json?"+Date.now())
.then(r=>r.json())
.then(data=>{

words=data.students[student].words

const test=document.getElementById("test")

words.forEach(w=>{

test.innerHTML+=`
<label>${w.ru}</label>
<input>
`

})

})

function finish(){

const inputs=document.querySelectorAll("input")

let correct=0

inputs.forEach((input,i)=>{

answers.push(input.value)

if(input.value.trim().toLowerCase()
===words[i].en.toLowerCase())
correct++

})

const percent=Math.round(correct/words.length*100)

document.getElementById("result").innerHTML=
"Результат: "+percent+"%"

saveAttempt(percent,answers)

}

function retry(){

location.reload()

}

function saveAttempt(percent,answers){

alert("Попытка сохранена (локально)")

}

</script>

</body>
</html>
