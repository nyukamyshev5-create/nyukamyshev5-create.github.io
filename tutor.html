<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">

<style>

body{
font-family:Arial;
padding:20px;
}

input{
display:block;
margin:5px;
padding:5px;
}

button{
margin:10px;
padding:8px 15px;
}

</style>
</head>
<body>

<h2 id="name"></h2>

<div id="test"></div>

<button onclick="check()">Проверить</button>

<button onclick="retry()">Новая попытка</button>

<div id="result"></div>

<script>

document.addEventListener("paste",e=>e.preventDefault())
document.addEventListener("copy",e=>e.preventDefault())

function getData(){
return JSON.parse(localStorage.getItem("students")||"{}")
}

function saveData(data){
localStorage.setItem("students",JSON.stringify(data))
}

const student=localStorage.getItem("currentStudent")

document.getElementById("name").innerText=student

function load(){

const data=getData()

const words=data[student].words

const div=document.getElementById("test")

div.innerHTML=""

words.forEach(w=>{

div.innerHTML+=`
<div>
${w}
<input autocomplete="off">
</div>
`

})

}

function check(){

const data=getData()

const words=data[student].words

const inputs=document.querySelectorAll("input")

let correct=0

let detail=[]

inputs.forEach((input,i)=>{

if(input.value.trim()===words[i]){

correct++

detail.push("✔ "+words[i])

}
else{

detail.push("✘ "+words[i]+" → "+input.value)

}

})

const percent=Math.round(correct/words.length*100)

if(!data[student].attempts)
data[student].attempts=[]

data[student].attempts.push({
percent,
detail
})

saveData(data)

document.getElementById("result").innerHTML=
percent+"%<br>"+detail.join("<br>")

}

function retry(){

load()

document.getElementById("result").innerHTML=""

}

load()

</script>

</body>
</html>
